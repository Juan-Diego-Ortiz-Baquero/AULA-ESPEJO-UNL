import os
from flask import Flask, render_template, request, session, jsonify
from dotenv import load_dotenv
import json

# Cargar variables de entorno
load_dotenv()

BASE_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
TEMPLATE_DIR = os.path.join(BASE_DIR, 'templates')
STATIC_DIR = os.path.join(BASE_DIR, 'static')

app = Flask(__name__, template_folder=TEMPLATE_DIR, static_folder=STATIC_DIR)
app.secret_key = os.getenv('SECRET_KEY', 'fundeco_secret_key_2024')

# Configurar OpenAI de forma segura
try:
    from openai import OpenAI
    openai_api_key = os.getenv('OPENAI_API_KEY')
    if openai_api_key and openai_api_key != 'tu_api_key_aqui':
        client = OpenAI(api_key=openai_api_key)
        OPENAI_AVAILABLE = True
    else:
        OPENAI_AVAILABLE = False
        print("‚ö†Ô∏è  OpenAI API key no configurada. El chatbot funcionar√° en modo demo.")
except ImportError:
    OPENAI_AVAILABLE = False
    print("‚ö†Ô∏è  OpenAI no est√° instalado. El chatbot funcionar√° en modo demo.")

@app.route('/login/1', methods=['GET', 'POST'])
def login1():
    return render_template('login/login1.html')

#---LOGIN 2---

@app.route('/login/2', methods=['GET', 'POST'])
def login2():
    return render_template('login/login2.html')

#---LOGIN 3---

@app.route('/login/3', methods=['GET', 'POST'])
def login3():
    return render_template('login/login3.html')

#---LOGIN 4---

@app.route('/login/4', methods=['GET', 'POST'])
def login4():
    return render_template('login/login4.html')

#---MENU---
@app.route('/', methods=['GET'])
def home():
    return render_template('home/home.html')

#---AULA ESPEJO HOME---
@app.route('/aula-espejo', methods=['GET'])
def aula_espejo_home():
    return render_template('home.html')

#---FUNDECO HOME (LEGACY ROUTE)---
@app.route('/fundeco', methods=['GET'])
def fundeco_home():
    return render_template('home/home.html')

#---LOGIN SELECTOR---
@app.route('/login-selector', methods=['GET'])
def login_selector():
    return render_template('login/login-selector.html')

#---ABOUT---
@app.route('/about', methods=['GET'])
def about():
    return render_template('about.html')

#---CONTACT---
@app.route('/contact', methods=['GET'])
def contact():
    return render_template('contact.html')

#---USER PROFILE---
@app.route('/profile', methods=['GET'])
def profile():
    return render_template('user/profile.html')

#---USER REGISTER---
@app.route('/register', methods=['GET', 'POST'])
def register():
    return render_template('user/register.html')

#---PRODUCT CATALOG---
@app.route('/catalog', methods=['GET'])
def catalog():
    return render_template('product/catalog.html')

#---PRODUCT DETAIL---
@app.route('/product/<int:product_id>', methods=['GET'])
def product_detail(product_id):
    return render_template('product/detail.html', product_id=product_id)

#---FUNDECO PAGES---
@app.route('/fundeco/beneficios', methods=['GET'])
def fundeco_beneficios():
    return render_template('fundeco/beneficios.html')

@app.route('/fundeco/tecnologia', methods=['GET'])
def fundeco_tecnologia():
    return render_template('fundeco/tecnologia.html')

@app.route('/fundeco/servicios', methods=['GET'])
def fundeco_servicios():
    return render_template('fundeco/servicios.html')

#---CHATBOT EXAMPLE---
@app.route('/chatbot-example', methods=['GET'])
def chatbot_example():
    return render_template('chatbot-example.html')

#---CHATBOT API---
@app.route('/api/chat', methods=['POST'])
def chat():
    try:
        data = request.get_json()
        user_message = data.get('message', '')
        
        if not user_message:
            return jsonify({'error': 'No message provided'}), 400
        
        # Si OpenAI est√° disponible, usar la API real
        if OPENAI_AVAILABLE:
            # Contexto espec√≠fico para FUNDECO
            system_prompt = """
            Eres el asistente virtual oficial de FUNDECO, una empresa ecuatoriana innovadora especializada en fundas biodegradables para agricultura sostenible. Tu funci√≥n principal es atender clientes potenciales, resolver consultas comerciales y promover la venta de productos y servicios.

            IMPORTANTE: Eres un asistente comercial y de atenci√≥n al cliente, NO un experto t√©cnico en procesos de fabricaci√≥n. Tu enfoque debe estar en ayudar al cliente a tomar decisiones de compra, no en explicar detalles internos de producci√≥n.

            INFORMACI√ìN COMERCIAL DEL PRODUCTO:
            - Fundas Biodegradables FUNDECO elaboradas con materiales naturales (almid√≥n de papa)
            - Dise√±adas espec√≠ficamente para uso agr√≠cola en viveros, huertos y cultivos
            - 100% Biodegradables: Se degradan naturalmente sin contaminar suelos ni agua
            - Funcionales: Misma resistencia y durabilidad que fundas pl√°sticas tradicionales durante el ciclo de cultivo
            - Econ√≥micas: Precio competitivo con ahorro en costos de limpieza y gesti√≥n de residuos
            - Compromiso Ambiental: Reduce huella ecol√≥gica y promueve agricultura responsable
            - Producci√≥n Local: Apoyamos econom√≠a circular del sur de Ecuador

            BENEFICIOS PARA DIFERENTES TIPOS DE CLIENTES:

            Para Agricultores:
            - Eliminan necesidad de recoger y desechar pl√°stico
            - Mejoran calidad del suelo al degradarse
            - Cumplen con normativas ambientales
            - Imagen de agricultura responsable

            Para Viveristas:
            - Diferenciaci√≥n en el mercado con productos ecol√≥gicos
            - Clientes m√°s satisfechos y conscientes
            - Reducci√≥n de costos operativos de limpieza
            - Sin residuos pl√°sticos acumulados

            Para Instituciones Educativas:
            - Herramienta educativa sobre sostenibilidad
            - Proyectos ambientales demostrativos
            - Cumplimiento de pol√≠ticas verdes institucionales

            Para Jardineros y Hogares:
            - Jardiner√≠a responsable sin culpa ambiental
            - Facilidad de uso sin gesti√≥n de residuos
            - Contribuci√≥n personal al cuidado del planeta

            SERVICIOS DISPONIBLES:
            1. Venta Directa de Productos: Fundas biodegradables en diferentes tama√±os, entregas en Loja y alrededores
            2. Pedidos Personalizados: Tama√±os especiales seg√∫n tipo de cultivo, cantidades adaptadas
            3. Distribuci√≥n Regional: Cobertura sur de Ecuador, opciones de env√≠o disponibles
            4. Asesor√≠a al Cliente: Orientaci√≥n sobre uso del producto, recomendaciones seg√∫n cultivo

            CONTACTO:
            - Email: info@fundeco.ec
            - WhatsApp Business: [pr√≥ximamente disponible]
            - Ubicaci√≥n: Loja, Ecuador
            - Horario: Lunes a Viernes 8:00-17:00, S√°bados 9:00-13:00

            PRECIOS ORIENTATIVOS:
            - Paquete Peque√±o (100 fundas): $15-25
            - Paquete Mediano (500 fundas): $60-90
            - Pedidos grandes (1000+): Cotizaci√≥n personalizada con descuento por volumen
            - Los precios var√≠an seg√∫n tama√±o y personalizaci√≥n

            TONO Y ESTILO DE COMUNICACI√ìN:
            - Amigable y cercano: Usa emojis con moderaci√≥n (üå±üåø‚ôªÔ∏è‚ú®)
            - Profesional: Lenguaje claro, sin tecnicismos innecesarios
            - Persuasivo pero no agresivo: Destaca beneficios sin presionar
            - Emp√°tico: Comprende necesidades del cliente
            - Conciso: Respuestas claras y directas
            - Proactivo: Ofrece informaci√≥n adicional relevante
            - Espa√±ol neutro y profesional

            PREGUNTAS FRECUENTES - RESPUESTAS COMERCIALES:

            ¬øCu√°nto tiempo duran las fundas?
            Respuesta: Mantienen resistencia durante todo el ciclo de cultivo (3-6 meses seg√∫n tipo de planta). Luego se degradan naturalmente en contacto con suelo en menos de un a√±o sin dejar residuos t√≥xicos.

            ¬øSon m√°s caras que las pl√°sticas?
            Respuesta: Aunque precio unitario puede ser ligeramente superior, el ahorro est√° en no recoger, transportar ni gestionar residuos pl√°sticos. Contribuyes a sostenibilidad y mejoras imagen ante clientes conscientes del medio ambiente.

            ¬øC√≥mo s√© que son biodegradables?
            Respuesta: Elaboradas con almid√≥n de papa y materiales naturales que se descomponen completamente. A diferencia del pl√°stico que tarda cientos de a√±os, nuestras fundas se degradan en menos de un a√±o enriqueciendo el suelo.

            ¬øHacen env√≠os fuera de Loja?
            Respuesta: Distribuimos principalmente en Loja y sur de Ecuador. Para pedidos grandes fuera de esta zona podemos coordinar env√≠os especiales.

            ¬øTienen diferentes tama√±os?
            Respuesta: Ofrecemos varios tama√±os est√°ndar para diferentes cultivos. Tambi√©n hacemos pedidos personalizados seg√∫n necesidades espec√≠ficas.

            ¬øC√≥mo hago un pedido?
            Respuesta: Muy f√°cil - (1) Cont√°ctanos por WhatsApp, email o web, (2) Ind√≠canos cantidad y tama√±o, (3) Te enviamos cotizaci√≥n personalizada, (4) Confirmas pedido y coordinamos entrega.

            LO QUE NO DEBES HACER:
            ‚ùå NO expliques procesos de fabricaci√≥n internos (recetas, f√≥rmulas, pasos t√©cnicos de producci√≥n)
            ‚ùå NO proporciones informaci√≥n financiera sensible (costos de producci√≥n, m√°rgenes, estructura de costos)
            ‚ùå NO hables de problemas operativos internos (cuellos de botella, eficiencia de producci√≥n)
            ‚ùå NO inventes informaci√≥n (si no sabes algo, ofrece contactar al equipo)
            ‚ùå NO uses jerga t√©cnica industrial (dosificadora, moldes, layout productivo)
            ‚ùå NO prometas lo que no puedes cumplir (plazos, precios no confirmados)

            LO QUE S√ç DEBES HACER:
            ‚úÖ Enf√≥cate en beneficios para el cliente (ahorro, sostenibilidad, facilidad de uso)
            ‚úÖ Resalta casos de √©xito y testimonios cuando sea relevante
            ‚úÖ Ofrece soluciones personalizadas seg√∫n necesidades del cliente
            ‚úÖ Invita a la acci√≥n (solicitar cotizaci√≥n, hacer pedido, visitar vivero aliado)
            ‚úÖ S√© transparente sobre plazos, disponibilidad y condiciones
            ‚úÖ Educa sobre sostenibilidad de forma inspiradora, no t√©cnica
            ‚úÖ Conecta emocionalmente con valores ambientales y responsabilidad

            MANEJO DE OBJECIONES:

            Objeci√≥n: "Es muy caro para mi presupuesto"
            Respuesta: Entiendo tu preocupaci√≥n. Con pl√°sticas tradicionales inviertes tiempo y dinero en recogerlas, transportarlas y desecharlas. Con FUNDECO simplemente las dejas en el suelo y se degradan solas. Adem√°s ofrecemos descuentos por volumen. ¬øQu√© cantidad necesitar√≠as? Preparo cotizaci√≥n ajustada a tu presupuesto.

            Objeci√≥n: "No estoy seguro si funcionar√°n igual que las pl√°sticas"
            Respuesta: Excelente pregunta. Nuestras fundas est√°n dise√±adas para igualar resistencia de fundas pl√°sticas durante ciclo completo de cultivo. Muchos agricultores y viveristas de la zona ya las usan con resultados excelentes. ¬øTe gustar√≠a conectar con alg√∫n cliente que ya las usa? O puedes empezar con pedido peque√±o de prueba.

            Objeci√≥n: "Siempre he usado pl√°stico y me funciona bien"
            Respuesta: Tiene sentido seguir con lo conocido. Lo interesante es que cada vez m√°s clientes buscan productos de agricultores responsables con medio ambiente. Cambiar a fundas biodegradables te diferencia en mercado y atrae clientes dispuestos a pagar m√°s por productos sostenibles. Es inversi√≥n en tu imagen y futuro de tu negocio. ¬øProbar con peque√±a cantidad?

            FLUJO DE CONVERSACI√ìN IDEAL:
            1. Saludo y Bienvenida: Saluda cordialmente y presenta brevemente FUNDECO
            2. Identificaci√≥n de Necesidades: Pregunta sobre tipo de cultivo, tama√±o de operaci√≥n, experiencia previa
            3. Presentaci√≥n de Soluci√≥n: Ofrece producto/servicio que mejor se ajuste
            4. Manejo de Dudas: Responde preguntas, aclara dudas, ofrece garant√≠as o testimonios
            5. Llamado a la Acci√≥n: Invita a solicitar cotizaci√≥n, hacer pedido de prueba, o contactar
            6. Seguimiento: Ofrece informaci√≥n de contacto y disponibilidad para futuras consultas

            INSTRUCCIONES FINALES:
            - Prioriza experiencia del cliente sobre venta agresiva
            - S√© genuinamente √∫til y resuelve dudas con claridad
            - Mant√©n foco comercial sin revelar informaci√≥n interna sensible
            - Construye confianza siendo honesto y transparente
            - Impulsa decisi√≥n con llamados a acci√≥n claros pero respetuosos
            - Representa valores de FUNDECO: sostenibilidad, innovaci√≥n, responsabilidad social

            Tu objetivo es convertir visitantes en clientes satisfechos que conf√≠en en FUNDECO como su aliado en agricultura sostenible. Responde en espa√±ol neutro, de forma concisa, clara y profesional.
            """
            
            # Llamada a OpenAI
            response = client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[
                    {"role": "system", "content": system_prompt},
                    {"role": "user", "content": user_message}
                ],
                max_tokens=500,
                temperature=0.7
            )
            
            bot_response = response.choices[0].message.content
        else:
            # Modo demo con respuestas predefinidas
            bot_response = get_demo_response(user_message)
        
        return jsonify({
            'response': bot_response,
            'status': 'success'
        })
        
    except Exception as e:
        return jsonify({
            'error': 'Error processing your message',
            'details': str(e)
        }), 500

def get_demo_response(user_message):
    """Funci√≥n para generar respuestas demo comerciales cuando OpenAI no est√° disponible"""
    message_lower = user_message.lower()
    
    # Respuestas comerciales basadas en palabras clave
    if any(word in message_lower for word in ['hola', 'buenos d√≠as', 'buenas tardes', 'buenas noches', 'saludos', 'hi', 'hello']):
        return "¬°Hola! üå± Bienvenido a FUNDECO, tu aliado en agricultura sostenible. Soy tu asistente comercial virtual y estoy aqu√≠ para ayudarte a encontrar la mejor soluci√≥n en fundas biodegradables para tu cultivo.\n\n¬øQu√© tipo de proyecto agr√≠cola tienes? ¬øEres agricultor, viverista, o tienes un huerto casero? Me encantar√≠a conocer tus necesidades para recomendarte la opci√≥n perfecta. ‚ú®"
    
    elif any(word in message_lower for word in ['producto', 'funda', 'biodegradable', 'almid√≥n', 'papa', 'material', 'qu√© es']):
        return "üåø ¬°Excelente pregunta! Nuestras fundas biodegradables FUNDECO est√°n elaboradas con almid√≥n de papa, un material 100% natural que revoluciona la agricultura sostenible.\n\n‚úÖ **Lo que las hace especiales:**\n‚Ä¢ Misma resistencia que fundas pl√°sticas durante el cultivo\n‚Ä¢ Se degradan naturalmente en menos de 1 a√±o\n‚Ä¢ Enriquecen el suelo al descomponerse\n‚Ä¢ Sin residuos t√≥xicos ni contaminaci√≥n\n\nüí∞ **Ahorro real:** No necesitas recoger, transportar ni gestionar residuos pl√°sticos.\n\n¬øPara qu√© tipo de cultivo las necesitas? Te ayudo a elegir el tama√±o perfecto. üå±"
    
    elif any(word in message_lower for word in ['beneficio', 'ventaja', 'por qu√©', 'mejor', 'diferencia']):
        return "‚ú® **¬øPor qu√© elegir FUNDECO?** Nuestros clientes obtienen beneficios reales:\n\nüå± **Para tu bolsillo:**\n‚Ä¢ Sin costos de limpieza y gesti√≥n de residuos\n‚Ä¢ Descuentos por volumen disponibles\n‚Ä¢ Precio competitivo vs. pl√°sticas + gesti√≥n\n\nüåç **Para tu imagen:**\n‚Ä¢ Diferenciaci√≥n como agricultor responsable\n‚Ä¢ Clientes prefieren productos sostenibles\n‚Ä¢ Cumples normativas ambientales\n\n‚ö° **Para tu operaci√≥n:**\n‚Ä¢ Eliminas tiempo de recolecci√≥n de pl√°stico\n‚Ä¢ Mejoras calidad del suelo naturalmente\n‚Ä¢ Proceso m√°s simple y eficiente\n\n¬øCu√°l de estos beneficios te interesa m√°s? ¬°Preparo una cotizaci√≥n personalizada! üíö"
    
    elif any(word in message_lower for word in ['servicio', 'ofrece', 'distribuci√≥n', 'asesor√≠a', 'pedido', 'comprar']):
        return "üõí **Servicios FUNDECO disponibles para ti:**\n\nüì¶ **Venta Directa:** Fundas en diferentes tama√±os, entrega en Loja y alrededores\n\nüéØ **Pedidos Personalizados:** Tama√±os especiales seg√∫n tu cultivo espec√≠fico\n\nüöö **Distribuci√≥n Regional:** Cobertura en sur de Ecuador, opciones de env√≠o\n\nüë• **Asesor√≠a al Cliente:** Te orientamos sobre uso y recomendaciones\n\n**¬øC√≥mo hacer tu pedido?**\n1Ô∏è‚É£ Me cuentas cantidad y tama√±o\n2Ô∏è‚É£ Te env√≠o cotizaci√≥n personalizada\n3Ô∏è‚É£ Confirmas y coordinamos entrega\n\n¬øQu√© cantidad necesitas? ¬°Empecemos! üöÄ"
    
    elif any(word in message_lower for word in ['precio', 'costo', 'cotizaci√≥n', 'presupuesto', 'cu√°nto', 'valor']):
        return "üí∞ **Precios FUNDECO - Inversi√≥n inteligente:**\n\nüì¶ **Paquete Peque√±o** (100 fundas): $15-25\n‚≠ê **Paquete Mediano** (500 fundas): $60-90\nüè¢ **Pedidos Grandes** (1000+): Cotizaci√≥n con descuentos por volumen\n\nüí° **¬°Recuerda!** Aunque el precio unitario puede ser ligeramente superior a pl√°sticas tradicionales, tu ahorro real est√° en:\n‚Ä¢ No recoger residuos\n‚Ä¢ No transportar desechos\n‚Ä¢ No gestionar pl√°sticos\n‚Ä¢ Mejor imagen ante clientes conscientes\n\n¬øQu√© cantidad necesitas? Te preparo cotizaci√≥n exacta con descuentos aplicables. Los precios var√≠an seg√∫n tama√±o y personalizaci√≥n. üìä"
    
    elif any(word in message_lower for word in ['contacto', 'tel√©fono', 'email', 'direcci√≥n', 'ubicaci√≥n', 'llamar']):
        return "üìû **Cont√°ctanos - FUNDECO siempre disponible:**\n\nüìß **Email:** info@fundeco.ec\nüì± **WhatsApp Business:** [Pr√≥ximamente disponible]\nüìç **Ubicaci√≥n:** Loja, Ecuador\nüïí **Horarios:** \n‚Ä¢ Lunes a Viernes: 8:00 - 17:00\n‚Ä¢ S√°bados: 9:00 - 13:00\n\n**¬øPrefieres que te contactemos nosotros?**\nD√©jame tu consulta espec√≠fica y un miembro de nuestro equipo comercial te contactar√° en menos de 24 horas.\n\n¬°Estamos aqu√≠ para hacer realidad tu agricultura sostenible! üå±üíö"
    
    elif any(word in message_lower for word in ['duran', 'duraci√≥n', 'tiempo', 'resistencia', 'funciona']):
        return "‚è∞ **Duraci√≥n perfecta para tu cultivo:**\n\nNuestras fundas FUNDECO mantienen **resistencia completa durante todo el ciclo de cultivo** (3-6 meses seg√∫n tipo de planta). Despu√©s se degradan naturalmente en contacto con el suelo en **menos de un a√±o** sin dejar residuos t√≥xicos.\n\n‚úÖ **Lo mejor de ambos mundos:**\n‚Ä¢ Resistencia cuando la necesitas\n‚Ä¢ Desaparici√≥n cuando ya no la necesitas\n\n**Casos de √©xito:** Agricultores y viveristas de la zona ya las usan con resultados excelentes.\n\n¬øTe gustar√≠a conectar con alg√∫n cliente que ya las usa? O podemos empezar con un pedido peque√±o de prueba. üå±"
    
    elif any(word in message_lower for word in ['caro', 'costoso', 'presupuesto', 'barato', 'econ√≥mico']):
        return "üí≠ **Entiendo tu preocupaci√≥n sobre el presupuesto.**\n\nCon fundas pl√°sticas tradicionales inviertes tiempo y dinero en:\n‚ùå Recogerlas manualmente\n‚ùå Transportarlas como residuo\n‚ùå Gestionar desechos\n‚ùå Cumplir normativas ambientales\n\n**Con FUNDECO simplemente las dejas en el suelo y se degradan solas.**\n\nüí° **Opciones para tu presupuesto:**\n‚Ä¢ Descuentos por volumen disponibles\n‚Ä¢ Planes de pago flexibles\n‚Ä¢ Pedidos de prueba en cantidades peque√±as\n\n¬øQu√© cantidad necesitar√≠as? Preparo una cotizaci√≥n ajustada a tu presupuesto espec√≠fico. ü§ù"
    
    elif any(word in message_lower for word in ['seguro', 'confianza', 'funcionar', 'igual', 'pl√°stico']):
        return "üéØ **¬°Excelente pregunta sobre confiabilidad!**\n\nNuestras fundas est√°n **dise√±adas para igualar la resistencia** de fundas pl√°sticas durante el ciclo completo de cultivo. \n\n‚úÖ **Respaldados por resultados reales:**\n‚Ä¢ Muchos agricultores y viveristas de la zona ya las usan\n‚Ä¢ Resultados excelentes comprobados\n‚Ä¢ Testimonios de clientes satisfechos disponibles\n\n**¬øTe gustar√≠a:**\nü§ù Conectar con alg√∫n cliente que ya las usa?\nüì¶ Empezar con pedido peque√±o de prueba?\nüìã Recibir casos de √©xito documentados?\n\nNo hay riesgo en probar. ¬°Tu tranquilidad es nuestra prioridad! üå±"
    
    elif any(word in message_lower for word in ['env√≠o', 'entrega', 'fuera', 'transporte', 'distribuci√≥n']):
        return "üöö **Distribuci√≥n FUNDECO - Te alcanzamos donde est√©s:**\n\nüìç **Cobertura principal:** Loja y sur de Ecuador\nüéØ **Entregas regulares:** Sin costo adicional en zona de cobertura\nüì¶ **Pedidos grandes fuera de zona:** Coordinamos env√≠os especiales\n\n**Proceso de entrega:**\n1Ô∏è‚É£ Confirmas tu pedido\n2Ô∏è‚É£ Coordinamos fecha y lugar\n3Ô∏è‚É£ Recibis tus fundas listas para usar\n\n¬øEn qu√© ciudad te encuentras? Te confirmo disponibilidad de entrega y tiempos exactos.\n\n**¬°No dejes que la distancia te detenga en tu agricultura sostenible!** üåç"
    
    elif any(word in message_lower for word in ['tama√±o', 'medida', 'diferentes', 'personalizado', 'especial']):
        return "üìè **Tama√±os FUNDECO - Perfecto para cada cultivo:**\n\n‚úÖ **Tama√±os est√°ndar disponibles** para diferentes tipos de cultivo\nüéØ **Pedidos personalizados** seg√∫n necesidades espec√≠ficas\nüìã **Asesor√≠a incluida** para elegir el tama√±o ideal\n\n**Para recomendarte el tama√±o perfecto, cu√©ntame:**\n‚Ä¢ ¬øQu√© tipo de cultivo tienes?\n‚Ä¢ ¬øCu√°l es el tama√±o aproximado de tus plantas?\n‚Ä¢ ¬øCu√°ntas plantas planeas cubrir?\n\n**Nuestro equipo tiene experiencia con:**\nüå± Hortalizas y verduras\nüåø Plantas ornamentales\nüå≥ Frutales j√≥venes\nüè° Huertos caseros\n\n¬°Hagamos que cada funda sea perfecta para tu proyecto! üéØ"
    
    elif any(word in message_lower for word in ['gracias', 'thank', 'perfecto', 'excelente', 'bien']):
        return "¬°De nada! üòä **Es un placer ayudarte a crecer de forma sostenible.**\n\nEn FUNDECO estamos comprometidos con hacer que tu agricultura sea m√°s rentable Y m√°s responsable con el medio ambiente.\n\nüå± **¬øEl siguiente paso?**\n‚Ä¢ ¬øTe gustar√≠a una cotizaci√≥n personalizada?\n‚Ä¢ ¬øNecesitas m√°s informaci√≥n sobre alg√∫n aspecto?\n‚Ä¢ ¬øQuieres comenzar con un pedido de prueba?\n\n**Recuerda:** Cada funda FUNDECO que usas es un paso hacia un futuro m√°s verde y una agricultura m√°s rentable.\n\n¬°Estoy aqu√≠ para cuando necesites cualquier cosa! üíö‚ú®"
    
    else:
        return "üå± **¬°Gracias por tu consulta sobre FUNDECO!**\n\nComo tu asistente comercial, puedo ayudarte con:\n\nüõí **Informaci√≥n comercial:**\n‚Ä¢ Productos y tama√±os disponibles\n‚Ä¢ Precios y cotizaciones personalizadas\n‚Ä¢ Descuentos por volumen\n\nüìã **Asesor√≠a especializada:**\n‚Ä¢ Recomendaciones seg√∫n tu cultivo\n‚Ä¢ Beneficios espec√≠ficos para tu caso\n‚Ä¢ Comparativas con alternativas tradicionales\n\nüöö **Proceso de compra:**\n‚Ä¢ C√≥mo hacer pedidos\n‚Ä¢ Opciones de entrega\n‚Ä¢ Plazos y disponibilidad\n\n**¬øSobre qu√© tema espec√≠fico te gustar√≠a saber m√°s?** Estoy aqu√≠ para ayudarte a tomar la mejor decisi√≥n para tu agricultura sostenible. üéØ"

if __name__ == "__main__":
    app.run(debug=True)
